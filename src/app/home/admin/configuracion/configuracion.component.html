<div class="row bg-title">
  <div class="col-lg-12">
      <h4 class="page-title">Edicion de Perfil</h4>
      <ol class="breadcrumb">
          <li><a href="#">Administrador</a></li>
          <li><a href="#">Edicion de Perfil</a></li>
          <li class="active">Editar</li>
      </ol>
  </div>
  <!-- /.col-lg-12 -->
</div>
<div class="col-xs-6 col-xs-offset-3 m-t-30 card" *ngIf="selectedUser">
  <form id="edit-form"  #EditUserForm="ngForm" (ngSubmit)="updateUser(EditUserForm.value)">

    <div class="form-group col-xs-12 m-b-15">
          <label for="username">Nombre de Usuario</label>
          <input type="text" class="form-control" id="username" name="username" required
                  ngModel #username="ngModel" [(ngModel)]="selectedUser.username">
            <div *ngIf="username.invalid && (username.dirty || username.touched)"
                  class="alert alert-danger" role="alert">
                <small *ngIf="username.errors.required">
                    El Usuario es invalido
                </small>
            </div>
      </div>
      <div class="form-group col-xs-6 m-b-15">
          <label for="nombres">Nombre</label>
          <input type="text" class="form-control" id="nombres" name="nombres" required
                  ngModel #nombres="ngModel" [(ngModel)]="selectedUser.nombres">
            <div *ngIf="nombres.invalid && (nombres.dirty || nombres.touched)"
                  class="alert alert-danger" role="alert">
                <small *ngIf="nombres.errors.required">
                    El Usuario es invalido
                </small>
            </div>
      </div>
      <div class="form-group col-xs-6 m-b-15">
          <label for="apellidos">Apellido</label>
          <input type="text" class="form-control" id="apellidos" name="apellidos" required
                  ngModel #apellidos="ngModel" [(ngModel)]="selectedUser.apellidos">
            <div *ngIf="apellidos.invalid && (apellidos.dirty || apellidos.touched)"
                  class="alert alert-danger" role="alert">
                <small *ngIf="apellidos.errors.required">
                    El Usuario es invalido
                </small>
            </div>
      </div>

      <div class="form-group col-xs-12 m-b-15">
            <label for="email">Email</label>
            <input type="email" class="form-control" id="email" name="email" required
                    ngModel #email="ngModel" [(ngModel)]="selectedUser.email">
              <div *ngIf="email.invalid && (email.dirty || email.touched)"
                    class="alert alert-danger" role="alert">
                  <small *ngIf="email.errors.required">
                      El Email es invalido
                  </small>
              </div>
      </div>
      <div class="form-group col-xs-12 m-b-15">
        <label for="descripcion">Descripcion</label>
        <input type="text" class="form-control" id="descripcion" name="descripcion" required
                ngModel #descripcion="ngModel" [(ngModel)]="selectedUser.descripcion">
          <div *ngIf="descripcion.invalid && (descripcion.dirty || descripcion.touched)"
                class="alert alert-danger" role="alert">
              <small *ngIf="descripcion.errors.required">
                  El Usuario es invalido
              </small>
          </div>
    </div>
      <div class="form-group col-xs-6 m-b-15">
          <label for="nacimiento">Fecha de Nacimiento</label>
          <input type="date" class="form-control" id="nacimiento" name="nacimiento" required
                  ngModel #nacimiento="ngModel" [(ngModel)]="selectedUser.nacimiento" (change)="date(nacimiento.value)">
            <div *ngIf="nacimiento.invalid && (nacimiento.dirty || nacimiento.touched)"
                  class="alert alert-danger" role="alert">
                <small *ngIf="nacimiento.errors.required">
                    El Usuario es invalido
                </small>
            </div>
      </div>
      <div class="form-group col-xs-12 m-b-15">
          <label for="type">Rol</label>
          <select name="type" class="form-control" id="type" [(ngModel)]="selectedUser.type" required ngModel #type="ngModel">
            <option value="0"></option>
            <option *ngFor="let userType of userTypesCombo" value="{{userType.id}}">{{userType.titulo}}</option>
          </select>
      </div>

        <input type="hidden" class="form-control" id="id" name="id" required
                ngModel #id="ngModel" [(ngModel)]="selectedUser.id">

      <div class="form-group col-xs-12 text-right m-b-15">
          <button type="button" class="btn btn-danger" data-dismiss="modal"><i class="fa fa-close" ></i> Cancel</button>
          <button type="submit" class="btn btn-success"><i class="fa fa-save"></i> Guardar</button>
      </div>
    </form>
    <form id="passChange-form"  #passChange="ngForm" (ngSubmit)="updatePass(passChange.value)">
      <div class="form-group col-xs-12 m-b-15">
            <label for="old_pass">Contraseña Anterior</label>
            <input type="password" class="form-control" id="old_pass" name="old_pass" required
                    ngModel #old_pass="ngModel" [(ngModel)]="selectedUser.old_pass">
              <div *ngIf="old_pass.invalid && (old_pass.dirty || old_pass.touched)"
                    class="alert alert-danger" role="alert">
                  <small *ngIf="old_pass.errors.required">
                      La Contraseña Anterior es invalida
                  </small>
              </div>
      </div>

      <div class="form-group col-xs-12 m-b-15">
            <label for="new_pass">Contraseña Nueva</label>
            <input type="password" class="form-control" id="new_pass" name="new_pass" required
                    ngModel #new_pass="ngModel">
              <div *ngIf="new_pass.invalid && (new_pass.dirty || new_pass.touched)"
                    class="alert alert-danger" role="alert">
                  <small *ngIf="new_pass.errors.required">
                      La Contraseña Nueva es invalida
                  </small>
              </div>
      </div>
      <div class="form-group col-xs-12 m-b-15">
            <label for="new_pass2">Repita la Contraseña Nueva</label>
            <input type="password" class="form-control" id="new_pass2" name="new_pass2" required
                    ngModel #new_pass2="ngModel">
              <div *ngIf="new_pass2.value != new_pass.value"
                    class="alert alert-danger" role="alert">
                  <small>
                      Las contraseñas deben ser Iguales
                  </small>
              </div>
      </div>
      <div class="form-group col-xs-12 text-right m-b-15">
          <button type="submit" class="btn btn-success"><i class="fa fa-save"></i> Cambiar Contraseña</button>
      </div>
  </form>
</div>
<simple-notifications [options]="options"></simple-notifications>


<div class="modal fade" id="Loading">
  <div class="modal-dialog">
    <div class="text-center" style="margin-top:50%;">
<app-loader></app-loader>
    </div>
  </div>
</div>
